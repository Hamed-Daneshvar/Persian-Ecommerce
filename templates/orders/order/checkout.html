{% extends 'shop/shop-base.html' %}
{% load static %}
{% load widget_tweaks %}

{% block title %}
{% block header-title %}
اطلاعات صورت حساب
{% endblock header-title %}
{% endblock title %}

{% block back-button %}
<!-- Back Button-->
  <div class="back-button"><a href="{% url 'cart:cart_detail' %}"><i class="lni lni-arrow-right"></i></a></div>
{% endblock back-button %}


{% block content %}
<div class="page-content-wrapper">
  <div class="container">
    <!-- Checkout Wrapper-->
    <div class="checkout-wrapper-area py-3">
      <!-- Billing Address-->
      <div class="billing-information-card mb-3">
        <div class="card billing-information-title-card bg-danger">
          <div class="card-body">
            <h6 class="text-center mb-0 text-white">اطلاعات صورت حساب</h6>
          </div>
        </div>
        <form action="{% url 'orders:order_create' %}" id="checkout-form" method="post">
          <div class="card user-data-card">
            <div class="card-body">
              <div class="mb-3">
                <div class="title mb-2"><i class="lni lni-user"></i><span>نام و نام خانوادگی</span></div>
                {% render_field form.full_name class+="form-control" placeholder="ندا رضوانی" %}
              </div>
              <div class="mb-3">
                <div class="title mb-2"><i class="lni lni-envelope"></i><span>آدرس ایمیل</span></div>
                {% render_field form.email class+="form-control" placeholder="example@gmail.com" %}
              </div>
              <div class="mb-3">
                <div class="title mb-2"><i class="lni lni-phone"></i><span>تلفن</span></div>
                {% render_field form.phone class+="form-control" placeholder="09121234567" %}
              </div>
              <div class="mb-3">
                <div class="title mb-2"><i class="lni lni-map-marker"></i><span>آدرس حمل و نقل</span></div>
                {% render_field form.address class+="form-control" placeholder="تهران - ونک - خ فلان - ک فلان - ساختمان فلان - واحد 5 کد پستی: 1234567890" %}
              </div>
            </div>
          </div>
          {% csrf_token %}
        </form>
      </div>
      <!-- Shipping Method Choose-->
      <div class="shipping-method-choose mb-3">
        <div class="card shipping-method-choose-title-card bg-success">
          <div class="card-body">
            <h6 class="text-center mb-0 text-white">روش حمل و نقل را انتخاب کنید</h6>
          </div>
        </div>
        <div class="card shipping-method-choose-card">
          <div class="card-body">
            <div class="shipping-method-choose">
              <ul class="pl-0">
                <li>
                  <input id="fastShipping" type="radio" name="selector" checked="">
                  <label for="fastShipping">حمل و نقل سریع <span>1 روز با تحویل 20 تومان</span></label>
                  <div class="check"></div>
                </li>
                <li>
                  <input id="normalShipping" type="radio" name="selector">
                  <label for="normalShipping">تنظیم کننده <span>3-7 روز با تحویل 40 تومان</span></label>
                  <div class="check"></div>
                </li>
                <li>
                  <input id="courier" type="radio" name="selector">
                  <label for="courier">پیک <span>5-8 روز تحویل با 30 تومان</span></label>
                  <div class="check"></div>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <!-- Cart Amount Area-->
      <div class="card cart-amount-area">
        <div class="card-body d-flex align-items-center justify-content-between">
          {% if cart.coupon %}
          <div class="d-flex justify-content-between align-items-center">
            <h5 class="total-price mb-0 mr-3"><span class="counter">{{ cart.get_total_price_after_discount|floatformat }}</span>تومان</h5>
            <h6 class="total-price mb-0 text-decoration-line-through text-danger"><span class="counter">{{ cart.get_total_price|floatformat }}</span>تومان </h6>
          </div>
          <a class="btn btn-warning" id="checkout-submit" href="#">تأیید و پرداخت کنید</a>
          {% else %}
            <h5 class="total-price mb-0"><span class="counter">{{ cart.get_total_price|floatformat }}</span> تومان</h5><a class="btn btn-warning" id="checkout-submit" href="#">تأیید و پرداخت کنید</a>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock content %}



{% block domready %}
<script>
  var form = document.getElementById("checkout-form")
  document.getElementById("checkout-submit").addEventListener("click", function(){
      form.submit();
  });
</script>
{% endblock domready %}